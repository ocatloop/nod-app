name: Node.js CI

on:
  push:
    branches: ["master"]
permissions:
  contents: read
  actions: read

jobs:
  deploy: 
    runs-on: [self-hosted, shared-runner] 
    steps:
    - name: check out the code 
      uses: actions/checkout@v4
    - name: setup environment for application
      run: |
        sudo apt update
        sudo apt install nodejs -y
        sudo apt install npm -y
        npm install packag.json 
        npm install --production
    - name:  start application with pm2
      run: |
        cd $GITHUB_WORKSPACE
        pm2 start app.js --name nod-application
        echo "application has been started successfully..//."

        
   
