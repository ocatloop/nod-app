name: Node.js CI

on:
  push:
   branches: ["main"]
permissions:
  contents: read
  actions: read

jobs:
  deploy: 
    runs-on: self-hosted
    steps:
    - name: check out the code
      uses: actions/checkout@v4
    - name: setup environment for application
      run: |
        sudo apt update
        sudo apt install nodejs -y
        sudo apt install npm -y
        npm install packag.json 
        npm install --production
    - name:  start application with pm2
      run: |
        pm2 start app.js --name nod-application -i max --watch
        echo "application has been started successfully..//."

        
   
